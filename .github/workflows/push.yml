name: Push
on: push

jobs:
  check:
    runs-on: ubuntu-latest
    environment:
      name: testytest
    steps:
      - run: |
          set -e ${RUNNER_DEBUG:+-x}
          curl https://bux.re
  
  call:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        status: [in_progress, failure, success]
        include:
          - status: failure
            secrets: |
              ABC
              DEF
    steps:
      - run: |
          jq . <<< '${{ toJSON(matrix) }}'

  outputs:
    runs-on: ubuntu-latest
    needs: call
    steps:
      - run: |
          echo '${{ toJSON(needs.call.outputs) }}'    
